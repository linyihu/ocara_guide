<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html xmlns="http://www.w3.org/1999/xhtml">
<head>
<meta http-equiv="Content-Type" content="text/html; charset=utf-8" />
<title>事务处理</title>
<script type="text/javascript" src="../syntax/scripts/shCore.js"></script>
<script type="text/javascript" src="../syntax/scripts/shBrushPhp.js"></script>
<link type="text/css" rel="stylesheet" href="../style/base.css" />
<link type="text/css" rel="stylesheet" href="../syntax/styles/shCoreDefault.css"/>
<script type="text/javascript" src="../treeview/base.js"></script>
<style type="text/css">
    <!--
    .STYLE1 {
        color: #0000FF;
        font-weight: bold;
    }
    -->
</style>
</head>

<body><pre><h2>ORM模型</h2>

<strong>1、事务的使用</strong>
    事务处理要使用数据库连接对象实例的相关方法。
    一般用Model的db()获取，或者用Database::factory()获取。
    同时，
    有以下几个方法使用。
      （1）事务开始
           使用数据库对象的transBegin()方法。该方法格式如下：
                  <span class="STYLE1">transBegin()</span>
           实例：
<pre class="brush: php;">$userModel= new \Model\User();

//实例（1）使用Model的db()方法获取
$userModel-&gt;db()->transBegin();

//实例（2）使用Database::factory()获取
Database::factory()->transBegin();
</pre>
      （2）事务提交
           使用数据库对象的transCommit()方法。该方法格式如下：
                  <span class="STYLE1">transCommit()</span>
           实例：
<pre class="brush: php;">$userModel= new \Model\User();
$userModel-&gt;db()->transBegin();
$userModel->create();
$userModel-&gt;db()->transCommit();
</pre>
       （3）事务回滚
            使用数据库对象的transRollback()方法。该方法格式如下：
                  <span class="STYLE1">transRollback()</span>
            实例：
<pre class="brush: php;">$userModel= new \Model\User();
$userModel-&gt;db()->transBegin();
$userModel->create();
$userModel-&gt;db()->transRollback();
</pre>

</pre></body>
</html>
