<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html>
<head>
<meta http-equiv="Content-Type" content="text/html; charset=utf-8" />
<title>数据库的使用</title>
<script type="text/javascript" src="../syntax/scripts/shCore.js"></script>
<script type="text/javascript" src="../syntax/scripts/shBrushPhp.js"></script>
<link type="text/css" rel="stylesheet" href="../style/base.css" />
<link type="text/css" rel="stylesheet" href="../syntax/styles/shCoreDefault.css"/>
<script type="text/javascript" src="../treeview/base.js"></script>
<style type="text/css">
<!--
.STYLE1 {
	color: #0000FF;
	font-weight: bold;
}
.STYLE4 {color: #FF00FF; font-weight: bold; }
-->
</style>
</head>
<body><pre><h2>数据库的连接和调用</h2>

<table class="hint">
    <tr class="head">
        <td><h2>注意：</h2>一般不需要自行新建数据库，Model模型类会自动新建，这里只是说明一下。</td>
    </tr>
</table>

<strong>1、数据库的新建</strong>
      数据库都是通过工厂类Ocara\Core\DatabaseFactory的create()方法来实例化服务器连接对象。
      同一个服务器名仅在第一次实例化时才新建对象，工厂类会将其缓存起来。
              <span class="STYLE1">create([server])</span>
      参数说明：
</pre>
<table>
	<tr class="head">
		<td width="90">名称</td>
		<td width="400">描述</td>
	</tr>
	<tr>
		<td>server</td>
		<td>可选。数据库服务器名，默认为default。</td>
	</tr>
</table>
<pre>
      实例如下；
<pre class="brush: php;">$dbObj = \Ocara\Core\DatabaseFactory::create('bbs');
</pre>

<strong>2、数据库的连接</strong>
      新建数据模型Model时，不会立即连接数据库。在查询或操作时才会自动建立连接，连接对象是同一个。断线会重连。
      如果新建了Model后，想立即连接数据库，可以使用Model的connect()方法手动连接。

<pre class="brush: php;">
$userModel= new \app\model\database\UserModel();
$userModel->connect();
</pre>

</pre>
</body></html>
