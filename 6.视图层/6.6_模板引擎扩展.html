<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html xmlns="http://www.w3.org/1999/xhtml">
<head>
<meta http-equiv="Content-Type" content="text/html; charset=utf-8" />
<title>6.6 模板引擎扩展</title>
<script type="text/javascript" src="../syntax/scripts/shCore.js"></script>
<script type="text/javascript" src="../syntax/scripts/shBrushPhp.js"></script>
<link type="text/css" rel="stylesheet" href="../style/base.css" />
<link type="text/css" rel="stylesheet" href="../syntax/styles/shCoreDefault.css"/>
<script type="text/javascript" src="../treeview/base.js"></script>
<style type="text/css">
<!--
.STYLE1 {
	color: #0000FF;
	font-weight: bold;
}
-->
</style>
</head>

<body><pre><h2>6.6 模板引擎扩展</h2>

      框架本身集成了Smarty模板引擎，如果想使用自己的模板引警，需要安装好模板，然后新建模板引擎扩展类，再配置模板引擎以使用。
	  
<strong>1、新建模板引擎扩展</strong>
      新建模板引擎扩展类，要继承服务基类Ocara\Core\ServiceBase和模板接口Ocara\Service\Interfaces\Template。
      新的模板引擎类中必须有以下2个方法：
             （1）set
             （2）get
      还可以有以下方法：
             （1）registerObject
             （2）registerPlugin
      框架默认的Smarty模板类是Ocara\Service\Smarty，可以看看其代码，文件在框架目录ocara\system\library\Service\Smarty.php。
      
<strong>2、模板引擎要使用的配置</strong>
      不同的模板可以有不同的配置，这些配置都在模板引擎类中使用。如下是Smarty模板引擎的配置：
<pre class="brush: php;">

/*
 * Smarty模板配置
 * 可自由选择是否使用smarty模板
 */
'SMARTY' => array(
    'use_cache'	 => 0, //是否使用缓存
    'left_sign'	 => '<{', //模板中左标记
    'right_sign' => '}>', //模板中右标记
),

</pre>

<strong>3、如何开启模板引警</strong>
      使用新的模板引擎，要配置system.php中的“TEMPLATE”选项的engine和file_type项。
      其中，
            engine是模板引擎类名，如果是框架的Smarty，要配置成Ocara\Service\Smarty；
            file_type是模板文件扩展名。
      若使用框架集成的Smarty模板，配置如下：
<pre class="brush: php;">
/*
 * 模板配置
 */
$CONF['TEMPLATE'] = array(
	'file_type'			=> 'html',		//模板文件名
	'engine'			=> '\Ocara\Service\Smarty',			//模板插件
	'default'			=> 'default',	//默认模板名称
	'default_layout'	=> 'layout',	//默认的layout名称
);
</pre>
      
</pre></body>
</html>
