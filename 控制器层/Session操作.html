<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html>
<head>
<meta http-equiv="Content-Type" content="text/html; charset=utf-8" />
<title>Session操作</title>
<script type="text/javascript" src="../syntax/scripts/shCore.js"></script>
<script type="text/javascript" src="../syntax/scripts/shBrushPhp.js"></script>
<link type="text/css" rel="stylesheet" href="../style/base.css" />
<link type="text/css" rel="stylesheet" href="../style/function.css" />
<link type="text/css" rel="stylesheet" href="../syntax/styles/shCoreDefault.css"/>
<script type="text/javascript" src="../treeview/base.js"></script>
</head><body><pre>
<h2>Session操作</h2>
     Session操作可以使用\Ocara\Session插件。
     具体使用方法如下:
<pre><strong>1、get(name)</strong>
   获取session值。  
  参数说明：
 </pre>
<table>
	<tr class="head">
		<td width="90">名称</td>
		<td width="400">描述</td>
	</tr>
		<tr>
		<td>name</td>
		<td>必需。变量名称，如果为空，则返回$_SESSION整个数组。</td>
	</tr>
	</table>
 <pre class="brush: php;">
 $login_info = $this->session->get('login_info'); </pre>
<pre><strong>2、set(name, value)</strong>
  设置session值。  
  参数说明：
 </pre>
<table>
	<tr class="head">
		<td width="90">名称</td>
		<td width="400">描述</td>
	</tr>
		<tr>
		<td>name</td>
		<td>必需。变量名称。如果为键值数组，则将键名作为变量名，键值作为变量值</td>
	</tr>
		<tr>
		<td>value</td>
		<td>必需。变量值</td>
	</tr>
	</table>  

（1）设置is_login为true
<pre class="brush: php;">
  $this->session->set('is_login', true); </pre>
  批量设置is_login为true，设置user_name为user1
<pre class="brush: php;">
$this->session->set(array(
	'is_login' => true,
	'user_name' => 'user1'
));
</pre>
  <pre><strong>3、delete(name)</strong>
   删除session变量。  
  参数说明：
 </pre>
<table>
	<tr class="head">
		<td width="90">名称</td>
		<td width="400">描述</td>
	</tr>
		<tr>
		<td>name</td>
		<td>必需。变量名称。</td>
	</tr>
	</table>
 <pre class="brush: php;">
 $this->session->delete('login_info'); </pre>
<strong>4、getId()</strong>
  获取session ID。
 <pre class="brush: php;">
 $sessionId = $this->session->getId(); </pre>
 <strong>5、getName()</strong>
  获取session名称。  

 <pre class="brush: php;">
 $sessionName = $this->session->getName();; </pre>
<strong>6、clear()</strong>
  清空session。
 <pre class="brush: php;">
 $this->session->clear(); </pre>
<pre><strong>7、has(name)</strong>
  检测是否设置了某个session变量。  
  参数说明：
 </pre>
<table>
	<tr class="head">
		<td width="90">名称</td>
		<td width="400">描述</td>
	</tr>
		<tr>
		<td>name</td>
		<td>必需。变量名称。</td>
	</tr>
	</table>
 <pre class="brush: php;">
if ($this->session->exists('user_name')) {
	echo true;
} else {
	echo false;
}
</pre>
<strong>8、destroy()</strong>
  释放session。
 <pre class="brush: php;">
 $this->session->destroy(); </pre>
<strong>9、setSaveTime(saveTime)</strong>
  设置session有效期(单位为秒)。 

 <pre class="brush: php;">
 $this->session->setSaveTime(86400); </pre>
<pre><strong>10、setCookie(saveTime[, path, domain, secure, httponly])</strong>
  保存session到cookie。参数类似于setcookie()原生函数。  
  参数说明：
 </pre>
<table>
	<tr class="head">
		<td width="90">名称</td>
		<td width="400">描述</td>
	</tr>
		<tr>
		<td>saveTime</td>
		<td>必需。cookie保存时间。</td>
	</tr>
		<tr>
		<td>path</td>
		<td>可选。有效目录。</td>
	</tr>
		<tr>
		<td>domain</td>
		<td>可选。有效域名。</td>
	</tr>
		<tr>
		<td>secure</td>
		<td>可选。安全参数。</td>
	</tr>
    		<tr>
		<td>httponly</td>
		<td>可选。安全参数，默认为true。为防注入，建议保持为true。</td>
	</tr>
	</table>
 <pre class="brush: php;">
 $login_info = $this->session->setCookie(86400); </pre>
<strong>11、serialize()</strong>
  序列化session数组。  

 <pre class="brush: php;">
 $sessionString = $this->session->serialize(); </pre>
<pre><strong>12、unserialize(data)</strong>
  反序列化session字符串。  
  参数说明：
 </pre>
<table>
	<tr class="head">
		<td width="90">名称</td>
		<td width="400">描述</td>
	</tr>
		<tr>
		<td>data</td>
		<td>必需。要反序列化的session字符串。</td>
	</tr>
	</table>
 <pre class="brush: php;">
 $session = $this->session->unserialize($sessionString); </pre>
</pre>
</body></html>
